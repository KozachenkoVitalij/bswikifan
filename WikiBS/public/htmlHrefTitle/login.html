<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Login</title>
	<link rel="stylesheet" type="text/css" href="/styles/style-mainmenu.css">
	<link rel="stylesheet" type="text/css" href="/styles/styles-template/style-template-footer-header.css">
	<link rel="stylesheet" type="text/css" href="/styles/created-acount-style.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,100..1000&family=Roboto:ital,wght@0,100..900;1,100..900&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
	<link rel="icon" type="img" href="/images/Character2dModel/AliceSprite.png" />
</head>
<body>

	<header id="headerTemp" class="headerBarStyle"></header>
		
	<main>
	
	<section class="left-created-acount" data-login-On='visible'>
		<header class="h1-content"><h1>Login acount</h1></header>
		<form name="login">
			<label>Username</label>
			<input type="text" name="username" id="username"  placeholder="Enter your username"  required autocomplete="username">
			<label>Password</label>
			<input type="password" name="password" id="password"  placeholder="Enter your password" required autocomplete="password">
			<label >
				<input class="checkbox-input" type="checkbox" name="agread" checked>
				Agread Term Privacy Police
			</label>
			</div>
			<div class="button">
				<button id="login-but" onclick="toggleLogin()" onclick="toggleLogin2()">Login</button>
			</div>
		</form>
	</section>
	</main>
	<section class="login-complited" data-login = 'hidden'>
		<h1>Login complete</h1>
		<div class="button">
		<button><a href="/bswikifan.html">Back to Homepage</a></button>
		</div>
	</section>
	<footer id="footer"></footer>
</body>
<script type="text/javascript" src="/Script/mainmenuAPI.js"></script>
<script type="text/javascript">
        function toggle(selector, attribute) {
          const element = document.querySelector(selector);
          if (element) {
            if (element.getAttribute(attribute) === 'hidden') {
              element.setAttribute(attribute, 'visible');
            } else {
              element.setAttribute(attribute, 'hidden');
            }
          } else {
            console.error('Element not found!');
          }
        }

        document.addEventListener("DOMContentLoaded", function () {
          initTemplates();
        });
</script>
<script>
document.getElementById("login-but").addEventListener("click", function(event) {
    event.preventDefault();
    let name = document.getElementById("username").value.trim();
    let password = document.getElementById("password").value.trim();

    if (!name || !password) {
        alert("Заповніть всі поля!");
        return;
    }

    let savedUser = JSON.parse(localStorage.getItem("user")); // Отримуємо користувача з локального сховища

    if (savedUser && savedUser.name === name && savedUser.password === password) {
        localStorage.setItem("loggedInUser", name);
        toggleLogin(true); 
        toggleLogin2(true);
    } else {
        alert("Невірний логін або пароль!");
        toggleLogin(false);
        toggleLogin2(false);
    }
});

// Функція, яка змінює видимість логіну
function toggleLogin(isLoggedIn) {
    const element = document.querySelector('.login-complited');
    if (element) {
        if (isLoggedIn) {
            element.setAttribute('data-login', 'visible');
        } else {
            element.setAttribute('data-login', 'hidden');
        }
    }
}

function toggleLogin2(isLoggedIn){
	const element = document.querySelector('.left-created-acount');
	const elementLog= document.querySelector('.login-complited');

	if (isLoggedIn) {
		if(elementLog.getAttribute('data-login' === 'hidden')){
			element.setAttribute('data-login-On','visible')
		}else{
			element.setAttribute('data-login-On','hidden')
		}

	}

}

// Автоматична перевірка входу при завантаженні сторінки
document.addEventListener("DOMContentLoaded", function() {
    let loggedInUser = localStorage.getItem("loggedInUser");

    if (loggedInUser) {
 

    } else {
 
    }
});

</script>

</html>